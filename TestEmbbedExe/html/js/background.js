(function(e){function t(t){for(var r,u,a=t[0],c=t[1],s=t[2],p=0,d=[];p<a.length;p++)u=a[p],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&d.push(o[u][0]),o[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={background:0},i=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var f=c;i.push(["518f","chunk-vendors"]),n()})({"518f":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("1da1"),o=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2909")),i=(n("7f7f"),n("ac6a"),n("5df3"),function e(t){return new Promise((function(n){return t.createReader().readEntries((function(t){Promise.all(t.filter((function(e){return"."!==e.name[0]})).map((function(t){return t.isDirectory?e(t):new Promise((function(e){return t.file(e)}))}))).then((function(e){var t;return(t=[]).concat.apply(t,Object(o["a"])(e))})).then(n)}))}))}),u=function(e){return i(e).then((function(e){return e.map((function(e){return e.name+e.lastModifiedDate})).join()}))},a=function(){window.chrome.tabs.query({active:!0,currentWindow:!0},(function(e){e[0]&&window.chrome.tabs.reload(e[0].id),window.chrome.runtime.reload()}))},c=function e(t,n){u(t).then((function(r){n&&n!==r?a():setTimeout((function(){return e(t,r)}),1e3)}))},s=function(){window.chrome.management.getSelf((function(e){"development"===e.installType&&window.chrome.runtime.getPackageDirectoryEntry((function(e){return c(e)}))}))},f=s,p=n("d4ec"),d=n("bee2"),h=n("bc3a"),l=n.n(h),m={baseUrl:"https://*"},w=n("4328"),y=n.n(w),g=function(){function e(t){Object(p["a"])(this,e),this.baseUrl=t}return Object(d["a"])(e,[{key:"getInsideConfig",value:function(){var e={baseURL:this.baseUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e,t){return t["Content-Type"]&&t["Content-Type"].indexOf("multipart/form-data")>-1?e:t["Content-Type"]&&t["Content-Type"].indexOf("application/json")>-1?JSON.stringify(e):y.a.stringify(e,t)}]};return e}},{key:"interceptors",value:function(e){e.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}},{key:"request",value:function(e){var t=l.a.create();return e=Object.assign(this.getInsideConfig(),e),this.interceptors(t),t(e)}}]),e}(),b=new g(m.baseUrl),v=b;function O(e){return e.some((function(e){return"X-No-Rerequest"===e.name}))}var j=function(){chrome.webRequest.onBeforeSendHeaders.addListener(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O(t.requestHeaders)){e.next=3;break}return e.next=3,v.request({method:t.method,url:t.url,headers:{"X-No-Rerequest":"true"}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{urls:["https://www.baidu.com/*"]},["blocking","requestHeaders"])},P=j,k="https://saas-api.wezhuiyi.com",x="https://eco-api-test.wezhuiyi.com/eco-api";function S(e){fetch("".concat(k,"/api/kuaishou/assistant/notify"),{method:"POST",body:JSON.stringify({department_id:e.department_id,event:e.event,user_id:e.session.userNick}),headers:{"content-type":"application/json"}})}function R(e,t){var n=e.shopId;fetch("".concat(k,"/api/kuaishou/assistant/config?department_id=").concat(n)).then((function(e){return e.json()})).then((function(e){t(e.data)}))}function T(e){fetch("".concat(x,"/openApi/assist/updateStatus?shopId=").concat(e),{method:"POST"})}function q(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t({width:r.width,height:r.height})},r.onerror=function(){n(new Error('Get image size from "'.concat(e,'" failed.')))},r.src=e}))}function _(e,t){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,o,i,u,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.url,o=t.userId,e.next=3,q(r);case 3:i=e.sent,u=i.width,a=i.height,n({url:r,width:u,height:a,userId:o});case 7:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}f(),P(),chrome.runtime.onMessage.addListener((function(e,t,n){switch(e.type){case"sendZRG":return S(e.params),!0;case"sendImage":return _(e.params,n),!0;case"getConfig":return R(e.params,n),T(e.params.shopId),!0}}))}});